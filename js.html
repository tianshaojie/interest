<!DOCTYPE html>
<head>
    <title>JsBridge</title>
    <style>
        .button {
            background-color: #4CAF50; /* Green */
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            border-radius: 4px;
        }
    .button:active {
        background-color: #3e8e41;
    }
    </style>
    <script type="text/javascript">
        // fzzqxf%3a%2f%2fbrowser%2f%3ftitle%3dfoundersc%26url%3dhttps%253a%252f%252fwww.foundersc.com%252f
        // "shareImageUrl":"https://vii-img.oss-cn-beijing.aliyuncs.com/WechatIMG45.jpg",
        function initShareParams() {
            var shareParamMinProgram = {
                "shareUrl":"https://www.foundersc.com",
                "shareTitle":"沪指冲高回落再创今年以来新低 工业富联逼近跌停",
                "shareDesc":"内容-小程序分享测试",
                "shareImageUrl":"",
                "miniProgramPath":"pages/message_detail/message_detail?scheme=fzzqxf%3a%2f%2fbrowser%2f%3ftitle%3dfoundersc%26url%3dhttps%3a%2f%2fapp.foundersc.com%2fapi%2fnewinfo%2fwww%2findex.html%23%2fcontent%2fNW20180614888499235%3fappId%3dxf%26appScheme%3dfzzqxf"
            }
            window.nativeObject && window.nativeObject.handleMsgWithParam("initShareParamsMiniProgram" ,JSON.stringify(shareParamMinProgram));

            var shareParam = {
                "shareUrl":"https://www.foundersc.com",
                "shareTitle":"标题-WebView分享测试",
                "shareDesc":"内容-WebView分享测试",
                "shareImageUrl":"https://vii-img.oss-cn-beijing.aliyuncs.com/WechatIMG45.jpg",
                "pageImageUrl":"https://vii-img.oss-cn-beijing.aliyuncs.com/WechatIMG44.jpg",
                "isShareImage":"true",
                "sharePlatforms":"wechatsession,miniprogram,wechattimeline,qqfriend,qzone,sinaweibo"
            }
            window.nativeObject && window.nativeObject.handleMsgWithParam("initShareParams" ,JSON.stringify(shareParam));
        }


    
    	function shareImage() {
            var shareParam = {
                "shareUrl":"https://www.foundersc.com",
                "shareTitle":"founder",
                "shareImageUrl":"https://vii-img.oss-cn-beijing.aliyuncs.com/WechatIMG45.jpg",
                "pageImageUrl":"https://vii-img.oss-cn-beijing.aliyuncs.com/WechatIMG44.jpg"
            }
            window.nativeObject && window.nativeObject.handleMsgWithParam("shareImage" ,JSON.stringify(shareParam));
        }

        function checkJsApi() {
            var apiList = ['getAppVersion', 'handleMsgWithParam.shareImage', 'test'];
            
            if(window.nativeObject && window.nativeObject.checkJsApi) {
                window.nativeObject.checkJsApi(JSON.stringify(apiList));
            } else {
                alert("未找到checkJsApi方法");
            }
        }    

        function checkJsApiResult(result) {
            alert(JSON.stringify(result));

            if(result && result["handleMsgWithParam.shareImage"]) {
                document.getElementById("shareImageBtn").style.display="block";
            } else {
                document.getElementById("shareImageBtn").style.display="none";
            }
        }  

        function routerH5() {
            var params = {
                "url":"https://www.foundersc.com",
                "name":"founder"
            }
            window.nativeObject && window.nativeObject.handleMsgWithParam("router" ,JSON.stringify(params));
        }

        function routerNative() {
            var params = {
                "url":"fzzqxf://simtrade/trading",
                "name":"模拟交易"
            }
            window.nativeObject.handleMsgWithParam("router" ,JSON.stringify(params));
        }

        function testRouterNative() {
            var params = {
                "url":"fzzqxf://simtrade/trading",
                "name":"模拟交易"
            }
            h5RouterApp(params);
        }


        function h5RouterApp(_params) {
            if (isNative()) {
                try {
                    window.nativeObject && window.nativeObject.handleMsgWithParam("router", JSON.stringify(_params));
                } catch (e) {
                    console.error(e);
                }
            } else {
                console.warn('无法获取原生[nativeObject]对象');
            }
        }
        function isNative() {
            if (typeof (nativeObject) !== 'undefined') {
                return true;
            }
            return false;
        };

        function getMyStocks() {
            var params = {}
            if(window.nativeObject) {
                var stocks = window.nativeObject.handleMsgWithParam("getMyStocks" ,JSON.stringify(params));
                alert(stocks);
            }
        }

    </script>
</head>
<body>

	<br><br>
    <input type="button" class="button" id="shareImageBtn" value="WebView调起图片分享界面" style="display:none;" onclick="shareImage();" /><br><br>
    
    <a href="second.html" class="button" >进入二级链接</a><br><br>

    <input type="button" class="button" value="checkJsApi" onclick="checkJsApi();" /><br><br>

    <a href="fzzqxf://browser/?title=foundersc&url=https://www.foundersc.com" class="button" >xf-scheme-browser</a><br><br>

    <a href="fzzqxm://browser/?title=foundersc&url=https://www.foundersc.com" class="button" >xm-scheme-browser</a><br><br>

    <a href="market://details?id=com.foundersc.app.xf&th_name=com.foundersc.app.xf" class="button" >Vivo商店测试</a><br><br>

    <input type="button" class="button" value="Router跳转-H5" onclick="routerH5();" /><br><br>

    <input type="button" class="button" value="Router跳转-Native" onclick="routerNative();" /><br><br>

    <input type="button" class="button" value="testRouterNative" onclick="testRouterNative();" /><br><br>

    <input type="button" class="button" value="getMyStocks" onclick="getMyStocks();" /><br><br>

    <a href="fzzqxf://quote/stockdetailsse?code=601901&codeType=4353" class="button" >xf-scheme-stock</a><br><br>

</body>


<script type="text/javascript">


    (function() {
        // 显示右上角分享按钮
        window.nativeObject && window.nativeObject.handleMsgWithParam("showNavigationRightButton", "");
        
        initShareParams();

        // 检查是否支持图片分享
        var apiList = ['handleMsgWithParam.shareImage'];
        if(window.nativeObject && window.nativeObject.checkJsApi) {
            window.nativeObject.checkJsApi(JSON.stringify(apiList));
        }
        

     })();


</script>


</html>
