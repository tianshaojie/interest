<!DOCTYPE html>
<head>
    <title>JsBridge</title>
    <style>
        .button {
            background-color: #4CAF50; /* Green */
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            border-radius: 4px;
        }
    .button:active {
        background-color: #3e8e41;
    }
    </style>
    <script type="text/javascript">

                // 
        function initShareParams() {
            var shareParamMinProgram = {
                "shareUrl":"https://www.foundersc.com",
                "shareTitle":"标题-小程序分享测试",
                "shareDesc":"内容-小程序分享测试",
                "shareImageUrl":"https://vii-img.oss-cn-beijing.aliyuncs.com/WechatIMG45.jpg",
                "miniProgramPath":"/pages/news/news"
            }
            window.nativeObject && window.nativeObject.handleMsgWithParam("initShareParamsMiniProgram" ,JSON.stringify(shareParamMinProgram));

            var shareParam = {
                "shareUrl":"https://www.foundersc.com",
                "shareTitle":"标题-WebView分享测试",
                "shareDesc":"内容-WebView分享测试",
                "shareImageUrl":"https://vii-img.oss-cn-beijing.aliyuncs.com/WechatIMG45.jpg",
                "pageImageUrl":"https://vii-img.oss-cn-beijing.aliyuncs.com/WechatIMG44.jpg",
                "isShareImage":"true",
                "sharePlatforms":"wechatsession,miniprogram,wechattimeline,qqfriend,qzone,sinaweibo"
            }
            window.nativeObject && window.nativeObject.handleMsgWithParam("initShareParams" ,JSON.stringify(shareParam));
        }


    
    	function shareImage() {
            var shareParam = {
                "shareUrl":"https://www.foundersc.com",
                "shareTitle":"founder",
                "shareImageUrl":"https://vii-img.oss-cn-beijing.aliyuncs.com/WechatIMG45.jpg",
                "pageImageUrl":"https://vii-img.oss-cn-beijing.aliyuncs.com/WechatIMG44.jpg"
            }
            window.nativeObject && window.nativeObject.handleMsgWithParam("shareImage" ,JSON.stringify(shareParam));
        }

        function checkJsApi() {
            var apiList = ['getAppVersion', 'handleMsgWithParam.shareImage', 'test'];
            
            if(window.nativeObject && window.nativeObject.checkJsApi) {
                window.nativeObject.checkJsApi(JSON.stringify(apiList));
            } else {
                alert("未找到checkJsApi方法");
            }
        }    

        function checkJsApiResult(result) {
            alert(JSON.stringify(result));

            if(result && result["handleMsgWithParam.shareImage"]) {
                document.getElementById("shareImageBtn").style.display="block";
            } else {
                document.getElementById("shareImageBtn").style.display="none";
            }
        }    

    </script>
</head>
<body onload="initShareParams();">

	<br><br>
    <input type="button" class="button" id="shareImageBtn" value="WebView调起图片分享界面" style="display:none;" onclick="shareImage();" /><br><br>
    
    <a href="second.html" class="button" >进入二级链接</a><br><br>

    <input type="button" class="button" value="checkJsApi" onclick="checkJsApi();" /><br><br>

</body>


<script type="text/javascript">


    (function() {
        // 显示右上角分享按钮
        window.nativeObject && window.nativeObject.handleMsgWithParam("showNavigationRightButton", "");
        
        // 检查是否支持图片分享
        var apiList = ['handleMsgWithParam.shareImage'];
        if(window.nativeObject && window.nativeObject.checkJsApi) {
            window.nativeObject.checkJsApi(JSON.stringify(apiList));
        }
        

     })();


</script>


</html>
