<!DOCTYPE html>
<head>
<meta charset="utf-8" />	
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>HT</title>
<style>
    .button {
        background-color: #4CAF50; /* Green */
        border: none;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        border-radius: 4px;
    }
.button:active {
    background-color: #3e8e41;
}
</style>
<!-- 以下为openinstall集成代码，建议在html文档中尽量靠前放置，加快初始化过程 -->
<!-- 强烈建议直接引用下面的cdn加速链接，以得到最及时的更新，我们将持续跟踪各种主流浏览器的变化，提供最好的服务；不推荐将此js文件下载到自己的服务器-->
<script type="text/javascript" charset="utf-8" src="https://web.cdn.openinstall.io/openinstall.js"></script>


<script type="text/javascript">
    // fzzqxf%3a%2f%2fbrowser%2f%3ftitle%3dfoundersc%26url%3dhttps%253a%252f%252fwww.foundersc.com%252f
    // "shareImageUrl":"https://vii-img.oss-cn-beijing.aliyuncs.com/WechatIMG45.jpg",
    function initShareParams() {
        var shareParamMinProgram = {
            "shareUrl":"https://www.foundersc.com",
            "shareTitle":"沪指冲高回落再创今年以来新低 工业富联逼近跌停",
            "shareDesc":"内容-小程序分享测试",
            "shareImageUrl":"",
            "miniProgramPath":"pages/message_detail/message_detail?scheme=fzzqxf%3a%2f%2fbrowser%2f%3ftitle%3dfoundersc%26url%3dhttps%3a%2f%2fapp.foundersc.com%2fapi%2fnewinfo%2fwww%2findex.html%23%2fcontent%2fNW20180614888499235%3fappId%3dxf%26appScheme%3dfzzqxf"
        }
        window.nativeObject && window.nativeObject.handleMsgWithParam("initShareParamsMiniProgram" ,JSON.stringify(shareParamMinProgram));

        var shareParam = {
            "shareUrl":"https://www.foundersc.com",
            "shareTitle":"标题-WebView分享测试",
            "shareDesc":"内容-WebView分享测试",
            "shareImageUrl":"https://vii-img.oss-cn-beijing.aliyuncs.com/WechatIMG45.jpg",
            "pageImageUrl":"https://vii-img.oss-cn-beijing.aliyuncs.com/WechatIMG44.jpg",
            "isShareImage":"true",
            "sharePlatforms":"wechatsession,miniprogram,wechattimeline,qqfriend,qzone,sinaweibo"
        }
        window.nativeObject && window.nativeObject.handleMsgWithParam("initShareParams" ,JSON.stringify(shareParam));
    }



	function shareImage() {
        var shareParam = {
            "shareUrl":"https://www.foundersc.com",
            "shareTitle":"founder",
            "shareImageUrl":"https://vii-img.oss-cn-beijing.aliyuncs.com/WechatIMG45.jpg",
            "pageImageUrl":"https://vii-img.oss-cn-beijing.aliyuncs.com/WechatIMG44.jpg"
        }
        window.nativeObject && window.nativeObject.handleMsgWithParam("shareImage" ,JSON.stringify(shareParam));
    }

    function checkJsApi() {
        var apiList = ['getAppVersion', 'handleMsgWithParam.shareImage', 'test'];
        
        if(window.nativeObject && window.nativeObject.checkJsApi) {
            window.nativeObject.checkJsApi(JSON.stringify(apiList));
        } else {
            alert("未找到checkJsApi方法");
        }
    }    

    function checkJsApiResult(result) {
        alert(JSON.stringify(result));

        if(result && result["handleMsgWithParam.shareImage"]) {
            document.getElementById("shareImageBtn").style.display="block";
        } else {
            document.getElementById("shareImageBtn").style.display="none";
        }
    }  

    function routerH5() {
        var params = {
            "url":"https://www.foundersc.com",
            "name":"founder"
        }
        window.nativeObject && window.nativeObject.handleMsgWithParam("router" ,JSON.stringify(params));
    }

    function routerNative() {
        var params = {
            "url":"fzzqxf://simtrade/trading",
            "name":"模拟交易"
        }
        window.nativeObject.handleMsgWithParam("router" ,JSON.stringify(params));
    }

    function testRouterNative() {
        var params = {
            "url":"fzzqxf://simtrade/trading",
            "name":"模拟交易"
        }
        h5RouterApp(params);
    }


    function h5RouterApp(_params) {
        if (isNative()) {
            try {
                window.nativeObject && window.nativeObject.handleMsgWithParam("router", JSON.stringify(_params));
            } catch (e) {
                console.error(e);
            }
        } else {
            console.warn('无法获取原生[nativeObject]对象');
        }
    }
    function isNative() {
        if (typeof (nativeObject) !== 'undefined') {
            return true;
        }
        return false;
    };

    function getMyStocks() {
        var params = {}
        if(window.nativeObject) {
            var stocks = window.nativeObject.handleMsgWithParam("getMyStocks" ,JSON.stringify(params));
            alert(stocks);
        }
    }
	
    function getLocationCallback(String locationStr) {
	alert(locationStr);
    }


    //OpenInstall初始化时将与openinstall服务器交互，应尽可能早的调用
    /*web页面向app传递的json数据(json string/js Object)，应用被拉起或是首次安装时，通过相应的android/ios api可以获取此数据*/
    var data = OpenInstall.parseUrlParams();///openinstall.js中提供的工具函数，解析url中的所有查询参数
    new OpenInstall({
        /*appKey必选参数，openinstall平台为每个应用分配的ID*/
        appKey : "iinkbd",
        /*自定义遮罩的html*/
        //mask:function(){
        //  return "<div id='_shadow' style='position:fixed;left:0;top:0;background:rgba(0,255,0,0.5);filter:alpha(opacity=50);width:100%;height:100%;z-index:10000;'></div>"
        //},
        /*OpenInstall初始化完成的回调函数，可选*/
        onready : function() {
            /*在app已安装的情况尝试拉起app*/
            this.schemeWakeup();
            
            /*用户点击某个按钮时(假定按钮id为downloadButton)，安装app*/
            var m = this, button = document.getElementById("downloadButton");
            button.style.visibility = "visible";
            button.onclick = function() {
                m.wakeupOrInstall();
                return false;
            }
        }
    }, data);


</script>
</head>
<body>

    <input type="button" class="button" id="shareImageBtn" value="WebView调起图片分享界面" style="display:none;" onclick="shareImage();" /><br><br>
    
    <a href="second.html" class="button" >进入二级链接</a><br><br>

    <input type="button" class="button" value="checkJsApi" onclick="checkJsApi();" /><br><br>

    <a href="market://details?id=com.foundersc.app.xf&th_name=com.foundersc.app.xf" class="button" >Vivo商店测试</a><br><br>

    <input type="button" class="button" value="Router跳转-H5" onclick="routerH5();" /><br><br>

    <input type="button" class="button" value="Router跳转-Native" onclick="routerNative();" /><br><br>

    <input type="button" class="button" value="testRouterNative" onclick="testRouterNative();" /><br><br>

    <input type="button" class="button" value="getMyStocks" onclick="getMyStocks();" /><br><br>

    <a href="fzzqxf://quote/stockdetailsse?code=601901&codeType=4353" class="button" >scheme-stock</a><br><br>
	
    <a href="#" onclick="result = nativeObject.handleMsgWithParam('getHeaders', ''); alert('result:' + result)" class="button">getHeaders</a><br><br>
	
    <a href="#" onclick="nativeObject.handleMsgWithParam('getLocation', '');" class="button">getLocation</a><br><br>
	
    <a href="htopen://trade/LOFStock?cnFundType=1&fundCode=000001" class="button" >trade-buy</a><br><br>
	
    <a href="htopen://invest/invest" class="button" >投顾</a><br><br>
	
    <a href="htopen://account" class="button" >开户</a><br><br>

    <input type="button" class="button" id="downloadButton" value="OpenInstall下载或唤起APP" /><br><br>

    <a href="htopen://defaultbrowser?title=数据中心&url=https%3A%2F%2Fgj.cnht.com.cn%3A9443%2FhomepageSTD%2F%23%2F%3Fckey%3D5E70AD4B0003" class="button" >数据中心</a><br><br>

</body>


<script type="text/javascript">


    (function() {
        // 显示右上角分享按钮
        window.nativeObject && window.nativeObject.handleMsgWithParam("showNavigationRightButton", "");
        
        initShareParams();

        // 检查是否支持图片分享
        var apiList = ['handleMsgWithParam.shareImage'];
        if(window.nativeObject && window.nativeObject.checkJsApi) {
            window.nativeObject.checkJsApi(JSON.stringify(apiList));
        }
        

     })();


</script>


</html>
